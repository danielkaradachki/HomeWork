/*
* Kendo UI Complete v2012.2.913 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
;(function(a,b){function C(b,c){b.filters&&(b.filters=a.grep(b.filters,function(a){C(a,c);return a.filters?a.filters.length:a.field!=c}))}var c=window.kendo,d=c.ui,e=d.Widget,f=c.keys,g=c.support.touch,h=c.htmlEncode,i="id",j="li",k=g?"touchend":"click",l="change",m="character",n="k-state-focused",o="k-state-hover",p="k-loading",q="open",r="close",s="select",t="selected",u="requestStart",v="requestEnd",w=a.extend,x=a.proxy,y=c.support.browser,z=y.msie&&parseInt(y.version,10)<9,A=/"/g,B=e.extend({init:function(b,d){var f=this,g=f.ns,h,l;e.fn.init.call(f,b,d),f._template(),f.ul=a('<ul unselectable="on" class="k-list k-reset"/>').css({overflow:c.support.touch?"":"auto"}).on("mouseenter"+g,j,function(){a(this).addClass(o)}).on("mouseleave"+g,j,function(){a(this).removeClass(o)}).on(k+g,j,x(f._click,f)),f.list=h=a("<div class='k-list-container'/>").append(f.ul).on("mousedown"+g,function(a){a.preventDefault()}),l=f.element.attr(i),l&&h.attr(i,l+"-list")},items:function(){return this.ul[0].children},current:function(a){var c=this;if(a!==b)c._current&&c._current.removeClass(n),a&&(a.addClass(n),c._scroll(a)),c._current=a;else return c._current},destroy:function(){var a=this,b=a.ns;e.fn.destroy.call(a),a._unbindDataSource(),a.ul.off(b),a.list.off(b),a.popup.destroy(),a._form&&a._form.off("reset",a._resetHandler)},dataItem:function(a){var c=this;a===b&&(a=c.selectedIndex);return c._data()[a]},_accessors:function(){var a=this,b=a.element,d=a.options,e=c.getter,f=b.attr(c.attr("text-field")),g=b.attr(c.attr("value-field"));f&&(d.dataTextField=f),g&&(d.dataValueField=g),a._text=e(d.dataTextField),a._value=e(d.dataValueField)},_blur:function(){var a=this;a._change(),a.close()},_change:function(){var a=this,c=a.selectedIndex,d=a.value(),e;d!==a._old?e=!0:c!==b&&c!==a._oldIndex&&(e=!0),e&&(a._old=d,a._oldIndex=c,a.trigger(l),a.element.trigger(l))},_click:function(b){b.isDefaultPrevented()||(this._accept(a(b.currentTarget)),b.type==="touchend"&&b.preventDefault())},_data:function(){return this.dataSource.view()},_enable:function(){var a=this,b=a.options;a.element.prop("disabled")&&(b.enable=!1),a.enable(b.enable)},_focus:function(a){var b=this;b.popup.visible()&&a&&b.trigger(s,{item:a})?b.close():(b._select(a),b._blur())},_height:function(a){if(a){var b=this,c=b.list,d=b.popup.visible(),e=b.options.height;c=c.add(c.parent(".k-animation-container")).show().height(b.ul[0].scrollHeight>e?e:"auto"),d||c.hide()}},_adjustListWidth:function(){var a=this.list,b=a[0].style.width,c=this.wrapper,d,e;d=window.getComputedStyle?window.getComputedStyle(c[0],null):0,e=d?parseFloat(d.width):c.outerWidth(),d&&(y.mozilla||y.msie)&&(e+=parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)+parseFloat(d.borderLeftWidth)+parseFloat(d.borderRightWidth)),b=e-(a.outerWidth()-a.width()),a.css({fontFamily:c.css("font-family"),width:b});return!0},_popup:function(){var a=this,b=a.list,e=a.options,f=a.wrapper;a.popup=new d.Popup(b,w({},e.popup,{anchor:f,open:function(b){a._adjustListWidth(),a.trigger(q)&&b.preventDefault()},close:function(b){a.trigger(r)&&b.preventDefault()},animation:e.animation})),a._touchScroller=c.touchScroller(a.popup.element)},_makeUnselectable:function(a){z&&this.list.find("*").attr("unselectable","on")},_toggleHover:function(b){g||a(b.currentTarget).toggleClass(o,b.type==="mouseenter")},_toggle:function(a){var c=this;a=a!==b?a:!c.popup.visible(),!g&&c._focused[0]!==document.activeElement&&c._focused.focus(),c[a?q:r]()},_scroll:function(a){if(!!a){a[0]&&(a=a[0]);var b=this.ul[0],c=a.offsetTop,d=a.offsetHeight,e=b.scrollTop,f=b.clientHeight,g=c+d;b.scrollTop=e>c?c:g>e+f?g-f:e}},_template:function(){var a=this,b=a.options,d=b.template,e=b.dataSource;a.element.is(s)&&a.element[0].length&&(e||(b.dataTextField=b.dataTextField||"text",b.dataValueField=b.dataValueField||"value")),d?(d=c.template(d),a.template=function(a){return'<li unselectable="on" class="k-item">'+d(a)+"</li>"}):a.template=c.template('<li unselectable="on" class="k-item">${data'+(b.dataTextField?".":"")+b.dataTextField+"}</li>",{useWithBlock:!1})}});w(B,{caret:function(a){var b,c=a.ownerDocument.selection;c?b=Math.abs(c.createRange().moveStart(m,-a.value.length)):b=a.selectionStart;return b},selectText:function(a,b,c){try{if(a.createTextRange){a.focus();var d=a.createTextRange();d.collapse(!0),d.moveStart(m,b),d.moveEnd(m,c-b),d.select()}else a.setSelectionRange(b,c)}catch(e){}},inArray:function(a,b){var c,d,e=b.children;if(!a||a.parentNode!==b)return-1;for(c=0,d=e.length;c<d;c++)if(a===e[c])return c;return-1}}),c.ui.List=B,d.Select=B.extend({init:function(a,b){B.fn.init.call(this,a,b)},setDataSource:function(a){this.options.dataSource=a,this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},close:function(){this.popup.close()},_accessor:function(a,c){var d=this.element,e=d.is(s),f,g;d=d[0];if(a===b){e?(g=d.selectedIndex,g>-1&&(f=d.options[g],f&&(a=f.value))):a=d.value;return a}e?d.selectedIndex=c:d.value=a},_hideBusy:function(){var a=this;clearTimeout(a._busy),a._arrow.removeClass(p),a._busy=null},_showBusy:function(){var a=this;a._request=!0;a._busy||(a._busy=setTimeout(function(){a._arrow.addClass(p)},100))},_requestEnd:function(){this._request=!1},_dataSource:function(){var b=this,d=b.element,e=b.options,f=e.dataSource||{},g;f=a.isArray(f)?{data:f}:f,d.is(s)&&(g=d[0].selectedIndex,g>-1&&(e.index=g),f.select=d,f.fields=[{field:e.dataTextField},{field:e.dataValueField}]),b.dataSource&&b._refreshHandler?b._unbindDataSource():(b._refreshHandler=x(b.refresh,b),b._requestStartHandler=x(b._showBusy,b),b._requestEndHandler=x(b._requestEnd,b)),b.dataSource=c.data.DataSource.create(f).bind(l,b._refreshHandler).bind(u,b._requestStartHandler).bind(v,b._requestEndHandler)},_unbindDataSource:function(){var a=this;a.dataSource.unbind(l,a._refreshHandler).unbind(u,a._requestStartHandler).unbind(v,a._requestEndHandler)},_index:function(a){var c=this,d,e,f=c._data(),g;for(d=0,e=f.length;d<e;d++){g=c._value(f[d]),g===b&&(g=c._text(f[d]));if(g==a)return d}return-1},_get:function(b){var c=this,d=c._data(),e,f;if(typeof b=="function")for(e=0,f=d.length;e<f;e++)if(b(d[e])){b=e;break}if(typeof b=="number"){if(b<0)return a();b=a(c.ul[0].children[b])}b&&b.nodeType&&(b=a(b));return b},_move:function(a){var b=this,c=a.keyCode,d=b.ul[0],e=b._current,g=c===f.DOWN,h;c===f.UP||g?(a.altKey?b.toggle(g):g?(b._select(e?e[0].nextSibling:d.firstChild),a.preventDefault()):(b._select(e?e[0].previousSibling:d.lastChild),a.preventDefault()),h=!0):c===f.ENTER||c===f.TAB?(b.popup.visible()&&a.preventDefault(),b._accept(e),h=!0):c===f.ESC&&(b.close(),h=!0);return h},_selectItem:function(a){var b=this,c=b.options;a=a||c.value||b.value(),a?b.value(a):b.select(c.index),b.trigger("selected")},_valueOnFetch:function(a){var b=this;if(!b.ul[0].firstChild&&!b._fetch){b.dataSource.one(l,function(){b._fetch=!0,b.value(a)}),b._request||b.dataSource.fetch();return!0}b._fetch=!1},_options:function(a,c){var d=this,e=d.element,f=e[0].selectedIndex,g=a.length,i="",j,k,l,m,n=0;c&&(i=c,n=1);for(;n<g;n++)j="<option",k=a[n],l=d._text(k),m=d._value(k),m!==b&&(m+="",m.indexOf('"')!==-1&&(m=m.replace(A,"&quot;")),j+=' value="'+m+'"'),j+=">",l!==b&&(j+=h(l)),j+="</option>",i+=j;e.html(i),e[0].selectedIndex=f},_reset:function(){var a=this,b=a.element,c=b.closest("form");c[0]&&(a._resetHandler=function(){setTimeout(function(){a.value(b[0].value)})},a._form=c.on("reset",a._resetHandler))},_cascade:function(){var c=this,d=c.options,e=d.cascadeFrom,f,g,h,i,j,k;if(e){f=a("#"+e).data("kendo"+d.name);if(!f)return;k=c.dataSource,h=f.options.dataValueField,i=function(){c.value(""),c.enable(!1)},j=function(){var a=c.value();a?(c.value(a),c.selectedIndex==-1&&c.value("")):c.select(d.index),c.trigger(t),c.enable()},g=function(){var a=f.dataItem(),b=a?f._value(a):null,c,d;b?(c=k.filter()||{},C(c,h),d=c.filters||[],d.push({field:h,operator:"eq",value:b}),k.one(l,j).filter(d)):i()},f.bind("cascade",i).bind(l,function(){g(),c.trigger("cascade")}).one(t,function(){g()}),f._valueCalled!==b?g():f.value()||c.enable(!1)}}}),d.Select.removeFiltersForField=C})(jQuery);