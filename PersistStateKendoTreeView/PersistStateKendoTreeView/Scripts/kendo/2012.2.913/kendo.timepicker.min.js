/*
* Kendo UI Complete v2012.2.913 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
;(function(a,b){function L(a){a.preventDefault()}function K(a){var b=a.parseFormats;a.format=f(a.format||c.getCulture(a.culture).calendars.standard.patterns.t),b=z(b)?b:[b],b.splice(0,0,a.format),a.parseFormats=b}function I(a,b,c){var d=H(b),e=H(c),f;if(!a||d==e)return!0;f=H(a),d>f&&(f+=w),e<d&&(e+=w);return f>=d&&f<=e}function H(a){return a.getHours()*60*v+a.getMinutes()*v+a.getSeconds()*1e3+a.getMilliseconds()}function G(){var a=new C,b=new C(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),c=new C(a.getFullYear(),a.getMonth(),a.getDate(),12,0,0);return-1*(b.getTimezoneOffset()-c.getTimezoneOffset())}function F(a,b,c){var d=a.getTimezoneOffset(),e;a.setTime(a.getTime()+b),c||(e=a.getTimezoneOffset()-d,a.setTime(a.getTime()+e*v))}var c=window.kendo,d=c.support.touch,e=c.keys,f=c._extractFormat,g=c.ui,h=g.Widget,i="open",j="close",k="change",l=".kendoTimePicker",m=(d?"touchend":"click")+l,n="k-state-default",o="disabled",p="li",q="<span/>",r="k-state-focused",s="k-state-hover",t="mouseenter"+l+" mouseleave"+l,u="mousedown"+l,v=6e4,w=864e5,x="k-state-selected",y="k-state-disabled",z=a.isArray,A=a.extend,B=a.proxy,C=Date,D=new C;D=new C(D.getFullYear(),D.getMonth(),D.getDate(),0,0,0);var E=function(b){var d=this;d.options=b,d.ul=a('<ul unselectable="on" class="k-list k-reset"/>').css({overflow:c.support.touch?"":"auto"}).on(m,p,B(d._click,d)).on("mouseenter"+l,p,function(){a(this).addClass(s)}).on("mouseleave"+l,p,function(){a(this).removeClass(s)}),d.list=a("<div class='k-list-container'/>").append(d.ul).on(u,L),d._popup(),d.template=c.template('<li class="k-item" unselectable="on">#=data#</li>',{useWithBlock:!1})};E.prototype={current:function(c){var d=this;if(c!==b)d._current&&d._current.removeClass(x),c&&(c=a(c),c.addClass(x),d.scroll(c[0])),d._current=c;else return d._current},close:function(){this.popup.close()},destroy:function(){var a=this;a.ul.off(l),a.list.off(l),a.popup.destroy()},open:function(){var a=this;a.ul[0].firstChild||a.bind(),a.popup.open(),a._current&&a.scroll(a._current[0])},dataBind:function(a){var b=this,d=b.options,e=d.format,f=c.toString,g=b.template,h=a.length,i=0,j,k="";for(;i<h;i++)j=a[i],I(j,d.min,d.max)&&(k+=g(f(j,e,d.culture)));b._html(k,h)},refresh:function(){var a=this,b=a.options,d=b.format,e=G(),f=e<0,g=b.min,h=b.max,i=H(g),j=H(h),k=b.interval*v,l=c.toString,m=a.template,n=new C(g),o=0,p,q="";f?p=(w+e*v)/k:p=w/k,i!=j&&(i>j&&(j+=w),p=(j-i)/k+1);for(;o<p;o++)o&&F(n,k,f),j&&H(n)>j&&(n=new C(h)),q+=m(l(n,d,b.culture));a._html(q,p)},bind:function(){var a=this,b=a.options.dates;b&&b[0]?a.dataBind(b):a.refresh()},_html:function(a,b){var c=this;c.ul[0].innerHTML=a,c._height(b),c.current(null),c.select(c._value)},scroll:function(a){if(!!a){var b=this.ul[0],c=a.offsetTop,d=a.offsetHeight,e=b.scrollTop,f=b.clientHeight,g=c+d;b.scrollTop=e>c?c:g>e+f?g-f:e}},select:function(b){var d=this,e=d.options,f=d._current;b instanceof Date&&(b=c.toString(b,e.format,e.culture)),typeof b=="string"&&(!f||f.text()!==b?(b=a.grep(d.ul[0].childNodes,function(a){return(a.textContent||a.innerText)==b}),b=b[0]?b:null):b=f),d.current(b)},toggle:function(){var a=this;a.popup.visible()?a.close():a.open()},value:function(a){var b=this;b._value=a,b.ul[0].firstChild&&b.select(a)},_click:function(b){var c=this,d=a(b.currentTarget);b.isDefaultPrevented()||(c.select(d),c.options.change(d.text(),!0),c.close())},_height:function(a){if(a){var b=this,c=b.list,d=c.parent(".k-animation-container"),e=b.options.height;c.add(d).show().height(b.ul[0].scrollHeight>e?e:"auto").hide()}},_parse:function(a){var b=this,d=b.options,e=b._value||D;if(a instanceof C)return a;a=c.parseDate(a,d.parseFormats,d.culture),a&&(a=new C(e.getFullYear(),e.getMonth(),e.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return a},_popup:function(){var a=this,b=a.list,d=a.options,e=d.anchor,f;a.popup=new g.Popup(b,A(d.popup,{anchor:e,open:d.open,close:d.close,animation:d.animation})),f=e.outerWidth()-(b.outerWidth()-b.width()),b.css({fontFamily:e.css("font-family"),width:f}),c.touchScroller(a.popup.element)},move:function(a){var b=this,c=a.keyCode,d=b.ul[0],f=b._current,g=c===e.DOWN;if(c===e.UP||g){if(a.altKey){b.toggle(g);return}g?f=f?f[0].nextSibling:d.firstChild:f=f?f[0].previousSibling:d.lastChild,f&&b.select(f),b.options.change(b._current.text()),a.preventDefault()}else if(c===e.ENTER||c===e.TAB||c===e.ESC)a.preventDefault(),f&&b.options.change(f.text(),!0),b.close()}},E.getMilliseconds=H,c.TimeView=E;var J=h.extend({init:function(a,b){var d=this;h.fn.init.call(d,a,b),a=d.element,b=d.options,K(b),d._wrapper(),d.timeView=new E(A({},b,{anchor:d.wrapper,format:b.format,change:function(b,c){c?d._change(b):a.val(b)},open:function(a){d.trigger(i)&&a.preventDefault()},close:function(a){d.trigger(j)&&a.preventDefault()}})),d._icon(),d._reset(),a[0].type="text",a.addClass("k-input").on("keydown"+l,B(d._keydown,d)).on("blur"+l,B(d._blur,d)).on("focus"+l,function(){d._inputWrapper.addClass(r)}),d.enable(!a.is("[disabled]")),d.value(b.value||a.val()),c.notify(d)},options:{name:"TimePicker",min:D,max:D,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{}},events:[i,j,k],setOptions:function(a){var b=this;h.fn.setOptions.call(b,a),K(b.options),A(b.timeView.options,b.options),b.timeView.ul[0].innerHTML=""},dataBind:function(a){z(a)&&this.timeView.dataBind(a)},enable:function(a){var b=this,c=b.element,d=b._arrow.off(l),e=b._inputWrapper.off(t);a===!1?(e.removeClass(n).addClass(y),c.attr(o,o)):(e.removeClass(y).addClass(n).on(t,b._toggleHover),c.removeAttr(o),d.on(m,B(b._click,b)).on(u,L))},destroy:function(){var a=this;h.fn.destroy.call(a),a.timeView.destroy(),a.element.off(l),a._arrow.off(l),a._inputWrapper.off(l),a._form&&a._form.off("reset",a._resetHandler)},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(a){return this._option("min",a)},max:function(a){return this._option("max",a)},value:function(a){var c=this;if(a===b)return c._value;c._old=c._update(a)},_blur:function(){var a=this;a.close(),a._change(a.element.val()),a._inputWrapper.removeClass(r)},_click:function(){var a=this,b=a.element;a.timeView.toggle(),!d&&b[0]!==document.activeElement&&b.focus()},_change:function(a){var b=this;a=b._update(a),+b._old!=+a&&(b._old=a,b.trigger(k),b.element.trigger(k))},_icon:function(){var b=this,c=b.element,d;d=c.next("span.k-select"),d[0]||(d=a('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(c)),b._arrow=d},_keydown:function(a){var b=this,c=a.keyCode,d=b.timeView;d.popup.visible()||a.altKey?d.move(a):c===e.ENTER&&b._change(b.element.val())},_option:function(a,c){var d=this,e=d.options;if(c===b)return e[a];c=d.timeView._parse(c);!c||(c=new C(c),e[a]=c,d.timeView.options[a]=c,d.timeView.bind())},_toggleHover:function(b){d||a(b.currentTarget).toggleClass(s,b.type==="mouseenter")},_update:function(a){var b=this,d=b.options,e=b.timeView._parse(a);I(e,d.min,d.max)||(e=null),b._value=e,b.element.val(e?c.toString(e,d.format,d.culture):a),b.timeView.value(e);return e},_wrapper:function(){var b=this,c=b.element,d;d=c.parents(".k-timepicker"),d[0]||(d=c.wrap(q).parent().addClass("k-picker-wrap k-state-default"),d=d.wrap(q).parent()),d[0].style.cssText=c[0].style.cssText,c.css({width:"100%",height:c[0].style.height}),b.wrapper=d.addClass("k-widget k-timepicker k-header").addClass(c[0].className).show(),b._inputWrapper=a(d[0].firstChild)},_reset:function(){var a=this,b=a.element,c=b.closest("form");c[0]&&(a._resetHandler=function(){a.value(b[0].defaultValue)},a._form=c.on("reset",a._resetHandler))}});g.plugin(J)})(jQuery);